<div class="teacher-dashboard">
  <!-- Header Section -->
  <header class="dashboard-header">
    <div class="header-content">
      <h1>Dashboard del Profesor</h1>
      <div class="teacher-info" *ngIf="teacherProfile">
        <span class="teacher-name">{{ teacherProfile.name || teacherProfile.email }}</span>
        <button class="logout-btn" (click)="logout()">
          <i class="fas fa-sign-out-alt"></i> Cerrar Sesi√≥n
        </button>
      </div>
    </div>
  </header>

  <!-- Loading State -->
  <div class="loading-container" *ngIf="loading">
    <div class="spinner"></div>
    <p>Cargando datos del profesor...</p>
  </div>

  <!-- Error State -->
  <div class="error-container" *ngIf="error && !loading">
    <div class="error-message">
      <i class="fas fa-exclamation-triangle"></i>
      <p>{{ error }}</p>
      <button class="retry-btn" (click)="loadTeacherData()">Reintentar</button>
    </div>
  </div>

  <!-- Main Content -->
  <main class="dashboard-content" *ngIf="!loading && !error">
    <!-- No Games State -->
    <div class="no-games" *ngIf="gamesWithStudents.length === 0">
      <div class="empty-state">
        <i class="fas fa-gamepad"></i>
        <h2>No hay juegos asignados</h2>
        <p>Actualmente no tienes juegos asignados en el sistema.</p>
      </div>
    </div>

    <!-- Games Grid -->
    <div class="games-grid" *ngIf="gamesWithStudents.length > 0">
      <div class="game-card" *ngFor="let gameWithStudents of gamesWithStudents">
        <!-- Game Header -->
        <div class="game-header">
          <h2 class="game-title">
            <i class="fas fa-gamepad"></i>
            {{ getGameDisplayName(gameWithStudents.game) }}
          </h2>
          <div class="game-stats">
            <span class="stat">
              <i class="fas fa-users"></i>
              {{ getTotalStudents(gameWithStudents.teams) }} estudiantes
            </span>
            <span class="stat">
              <i class="fas fa-user-friends"></i>
              {{ gameWithStudents.teams.length }} equipos
            </span>
          </div>
        </div>

        <!-- Teams Section -->
        <div class="teams-container">
          <div class="team-card" *ngFor="let team of gameWithStudents.teams">
            <div class="team-header">
              <h3 class="team-name">
                <i class="fas fa-flag"></i>
                {{ team.teamName }}
              </h3>
              <span class="team-count">{{ team.students.length }} miembros</span>
            </div>

            <!-- Students in Team -->
            <div class="students-grid">
              <div 
                class="student-card" 
                *ngFor="let student of team.students"
                (click)="viewStudentDetails(student.playername)"
              >
                <div class="student-avatar">
                  <i class="fas fa-user"></i>
                </div>
                <div class="student-info">
                  <h4 class="student-name">{{ student.playername }}</h4>
                  <div class="student-stats">
                    <span class="level">
                      <i class="fas fa-star"></i>
                      Nivel {{ student.level }}
                    </span>
                    <span class="points">
                      <i class="fas fa-coins"></i>
                      {{ student.points }} pts
                    </span>
                  </div>
                </div>
                <div class="student-arrow">
                  <i class="fas fa-chevron-right"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
